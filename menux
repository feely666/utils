#!/bin/bash

# Colors
YELLOW='\033[1;33m'
CYAN='\033[0;36m'
RED='\033[0;31m'
NC='\033[0m' # No Color

# System Information
MODEL=$(cat /etc/os-release | grep -w PRETTY_NAME | head -n1 | sed 's/=//g' | sed 's/"//g' | sed 's/PRETTY_NAME//g')
CORE=$(grep -c cpu[0-9] /proc/stat)
RAM=$(free -m | awk 'NR==2 {print $2}')
USAGERAM=$(free -m | awk 'NR==2 {print $3}')
LOADCPU=$(top -bn1 | awk '/Cpu/ { cpu = "" 100 - $8 "%" }; END { print cpu }')
IPVPS=$(curl -s ipv4.icanhazip.com)
ISP=$(cat /etc/xray/isp)
CITY=$(cat /etc/xray/city)
DOMAIN=$(cat /etc/xray/domain)
DATEVPS=$(date +'%d/%m/%Y')
TIMEZONE=$(date +'%H:%M:%S')
SERONLINE=$(uptime -p | cut -d " " -f 2-10000)

# Service Status
SSH_SERVICE=$(systemctl is-active ssh)
DROPBEAR_SERVICE=$(systemctl is-active dropbear)
HAPROXY_SERVICE=$(systemctl is-active haproxy)
XRAY_SERVICE=$(systemctl is-active xray)
NGINX_SERVICE=$(systemctl is-active nginx)

# Function to display menu
menu() {
    echo -e "System Information:"
    echo -e "Model: $MODEL"
    echo -e "CPU Cores: $CORE"
    echo -e "RAM: $USAGERAM/$RAM MB"
    echo -e "CPU Load: $LOADCPU"
    echo -e "IP Address: $IPVPS"
    echo -e "ISP: $ISP"
    echo -e "City: $CITY"
    echo -e "Domain: $DOMAIN"
    echo -e "Date: $DATEVPS"
    echo -e "Timezone: $TIMEZONE"
    echo -e "Server Online: $SERONLINE"
    echo -e ""
    echo -e "Service Status:"
    echo -e "SSH: $SSH_SERVICE"
    echo -e "Dropbear: $DROPBEAR_SERVICE"
    echo -e "HAProxy: $HAPROXY_SERVICE"
    echo -e "Xray: $XRAY_SERVICE"
    echo -e "Nginx: $NGINX_SERVICE"
    echo -e ""
    echo -e "Menu:"
    echo -e "[1] SSH Menu"
    echo -e "[2] VMESS Menu"
    echo -e "[3] VLESS Menu"
    echo -e "[4] Trojan Menu"
    echo -e "[5] SHDWSK Menu"
    echo -e "[6] Settings Menu"
    echo -e ""
}

# Main Menu
clear
menu
echo
read -p "Select menu: " opt
echo -e ""
case $opt in
    1)
        clear
        m-sshws
        ;;
    2)
        clear
        m-vmess
        ;;
    3)
        clear
        m-vless
        ;;
    4)
        clear
        m-trojan
        ;;
    5)
        clear
        m-ssws
        ;;
    6)
        clear
        utility
        ;;
    *)
        clear
        menu
        ;;
esac
